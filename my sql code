database validation checking  set on TRIGGER

CREATE TRIGGER `vehicle_fare_time_overlap` BEFORE INSERT ON `km_fares`
 FOR EACH ROW BEGIN
    DECLARE conflict_count INT DEFAULT 0;
      -- Validate start < end
    IF NEW.start >= NEW.end THEN
        SIGNAL SQLSTATE '45000'
            SET MESSAGE_TEXT = 'Invalid time range: time_start must be less than time_end.';
    END IF;
 
    SELECT COUNT(*) INTO conflict_count
    FROM km_fares
    WHERE category_id = NEW.category_id 
      AND day = NEW.day
      AND start <= NEW.end
      AND end >= NEW.start;
 
    IF conflict_count > 0 THEN
        SIGNAL SQLSTATE '45000'
            SET MESSAGE_TEXT = 'Overlapping time range (boundary included) detected for this day.';
    END IF;
END
